<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Locorent Testseite</title>
</head>
<body>
  <div id="layout">Lade Layoutâ€¦</div>

  <template id="content">
    <main style="padding: 2rem;">
      <h2>ðŸ‘‹ Willkommen auf der Testseite</h2>
      <p>Hier siehst du, wie das Layout automatisch eingebunden wird.</p>
    </main>
  </template>

  <script>
    async function loadLayout() {
      const res = await fetch("components/layout.html?nocache=" + Date.now());
      const text = await res.text();
      const doc = new DOMParser().parseFromString(text, "text/html");

      // Neuen Body aus layout.html extrahieren
      const layoutBody = doc.body.cloneNode(true);

      // Eigenen Inhalt aus <template> einsetzen
      const content = document.getElementById("content").content.cloneNode(true);
      layoutBody.insertBefore(content, layoutBody.querySelector("footer"));

      // Ganze Seite ersetzen
      document.documentElement.replaceWith(doc.documentElement);
      document.body.replaceWith(layoutBody);

      // Skripte neu ausfÃ¼hren
      for (const script of doc.querySelectorAll("script")) {
        const newScript = document.createElement("script");
        if (script.src) {
          newScript.src = script.src;
        } else {
          newScript.textContent = script.textContent;
        }
        document.body.appendChild(newScript);
      }
    }

    loadLayout();
  </script>
</body>
</html>
